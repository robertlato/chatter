<!DOCTYPE html>
<html lang="pl">
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
        var from = null, start = 0, url = "http://localhost/chat.php"
        $(document).ready(function () {
            from = prompt("Please enter your name");
            load();
            $('form').submit(function (e) {
                $.post(url, {
                    message: $('#message').val(),
                    from: from
                });
                $('message').val('');
                return false;
            })
        });

        function load(){
            $.get(url + '?start=' + start, function(result) {
                if(result.items) {
                    result.items.forEach(item => {
                        start = item.id;
                        $('messages').append(renderMessage(item));
                    })
                };
                load();
            });
        }

        function renderMessage(item){
            return `<div class="msg"><p>${item.from}</p>${item.message}</div>`
        }
    </script>
</head>
<body>

<div id="messages"></div>
<form>
    <input type="text" id="message" autocomplete="off" autofocus placeholder="Type message">
    <input type="submit" value="Send">
</form>
</body>
</html>